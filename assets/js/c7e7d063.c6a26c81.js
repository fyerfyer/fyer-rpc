"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[264],{3686:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>g,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"api-reference/registry-package","title":"registry Package","description":"registry\u5305\u63d0\u4f9b\u4e86\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u7684\u62bd\u8c61\u548c\u5b9e\u73b0\u3002","source":"@site/docs/api-reference/registry-package.md","sourceDirName":"api-reference","slug":"/api-reference/registry-package","permalink":"/fyer-rpc/docs/api-reference/registry-package","draft":false,"unlisted":false,"editUrl":"https://github.com/fyerfyer/fyer-rpc/tree/main/docs/api-reference/registry-package.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Protocol Package","permalink":"/fyer-rpc/docs/api-reference/protocol-package"},"next":{"title":"rpc Package","permalink":"/fyer-rpc/docs/api-reference/rpc-package"}}');var i=n(4848),c=n(8453);const s={},o="registry Package",a={},d=[{value:"Registry",id:"registry",level:3},{value:"etcd \u5b50\u5305",id:"etcd-\u5b50\u5305",level:3}];function p(e){const r={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsxs)(r.h1,{id:"registry-package",children:[(0,i.jsx)(r.code,{children:"registry"})," Package"]})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"registry"}),"\u5305\u63d0\u4f9b\u4e86\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u7684\u62bd\u8c61\u548c\u5b9e\u73b0\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"registry",children:"Registry"}),"\n",(0,i.jsx)(r.p,{children:"Registry\u63a5\u53e3\u5b9a\u4e49\u4e86\u6ce8\u518c\u4e2d\u5fc3\u7684\u6838\u5fc3\u529f\u80fd\uff1a"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-go",children:"type Registry interface {\r\n    // Register \u6ce8\u518c\u670d\u52a1\u5b9e\u4f8b\r\n    Register(ctx context.Context, service *naming.Instance) error\r\n\r\n    // Deregister \u6ce8\u9500\u670d\u52a1\u5b9e\u4f8b\r\n    Deregister(ctx context.Context, service *naming.Instance) error\r\n\r\n    // Subscribe \u8ba2\u9605\u670d\u52a1\u53d8\u66f4\r\n    Subscribe(ctx context.Context, service string, version string) (<-chan []*naming.Instance, error)\r\n\r\n    // Unsubscribe \u53d6\u6d88\u8ba2\u9605\u670d\u52a1\u53d8\u66f4\r\n    Unsubscribe(ctx context.Context, service string, version string) error\r\n\r\n    // ListServices \u83b7\u53d6\u670d\u52a1\u5b9e\u4f8b\u5217\u8868\r\n    ListServices(ctx context.Context, service string, version string) ([]*naming.Instance, error)\r\n\r\n    // UpdateService \u670d\u52a1\u5fc3\u8df3\r\n    UpdateService(ctx context.Context, service *naming.Instance) error\r\n\r\n    // Close \u5173\u95ed\u6ce8\u518c\u4e2d\u5fc3\u8fde\u63a5\r\n    Close() error\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"etcd-\u5b50\u5305",children:"etcd \u5b50\u5305"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"etcd"}),"\u5b50\u5305\u63d0\u4f9b\u4e86\u57fa\u4e8e etcd \u7684\u6ce8\u518c\u4e2d\u5fc3\u5b9e\u73b0\uff1a"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-go",children:"// New \u521b\u5efaetcd\u6ce8\u518c\u4e2d\u5fc3\u5b9e\u4f8b\r\nfunc New(opts ...Option) (*EtcdRegistry, error)\n"})}),"\n",(0,i.jsx)(r.p,{children:"\u914d\u7f6e\u9009\u9879\uff1a"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-go",children:"// WithEndpoints \u8bbe\u7f6eetcd endpoints\r\nfunc WithEndpoints(endpoints []string) Option\r\n\r\n// WithDialTimeout \u8bbe\u7f6e\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\r\nfunc WithDialTimeout(timeout time.Duration) Option\r\n\r\n// WithTTL \u8bbe\u7f6e\u670d\u52a1\u79df\u7ea6\u65f6\u95f4\r\nfunc WithTTL(ttl int64) Option\r\n\r\n// WithTLSConfig \u8bbe\u7f6eTLS\u914d\u7f6e\r\nfunc WithTLSConfig(certFile, keyFile, caFile string) Option\r\n\r\n// \u5176\u5b83\u914d\u7f6e\u9009\u9879...\n"})})]})}function g(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var t=n(6540);const i={},c=t.createContext(i);function s(e){const r=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(c.Provider,{value:r},e.children)}}}]);