"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[140],{2905:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api-reference/api-package","title":"api Package","description":"api\u5305\u63d0\u4f9b\u4e86\u9ad8\u7ea7\u62bd\u8c61\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u63a5\u53e3\uff0c\u662f\u4f7f\u7528 fyerrpc \u6846\u67b6\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u3002","source":"@site/docs/api-reference/api-package.md","sourceDirName":"api-reference","slug":"/api-reference/api-package","permalink":"/fyer-rpc/docs/api-reference/api-package","draft":false,"unlisted":false,"editUrl":"https://github.com/fyerfyer/fyer-rpc/tree/main/docs/api-reference/api-package.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Service Registry & Discovery","permalink":"/fyer-rpc/docs/advanced/service registry&discovery/"},"next":{"title":"cluster Package","permalink":"/fyer-rpc/docs/api-reference/cluster_package"}}');var s=n(4848),c=n(8453);const t={},a="api Package",o={},l=[{value:"Server",id:"server",level:3},{value:"Client",id:"client",level:3},{value:"Service",id:"service",level:3}];function d(e){const r={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsxs)(r.h1,{id:"api-package",children:[(0,s.jsx)(r.code,{children:"api"})," Package"]})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"api"}),"\u5305\u63d0\u4f9b\u4e86\u9ad8\u7ea7\u62bd\u8c61\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u63a5\u53e3\uff0c\u662f\u4f7f\u7528 fyerrpc \u6846\u67b6\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u3002"]}),"\n",(0,s.jsx)(r.h3,{id:"server",children:"Server"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Server"}),"\u63a5\u53e3\u5b9a\u4e49\u4e86 RPC \u670d\u52a1\u5668\u7684\u6838\u5fc3\u529f\u80fd\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"type Server interface {\r\n    // Register \u6ce8\u518c\u670d\u52a1\r\n    Register(service interface{}) error\r\n\r\n    // Start \u542f\u52a8\u670d\u52a1\u5668\r\n    Start() error\r\n\r\n    // Stop \u505c\u6b62\u670d\u52a1\u5668\r\n    Stop() error\r\n\r\n    // Address \u83b7\u53d6\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740\r\n    Address() string\r\n}\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u4f7f\u7528",(0,s.jsx)(r.code,{children:"NewServer"}),"\u51fd\u6570\u521b\u5efa\u670d\u52a1\u5668\u5b9e\u4f8b\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"func NewServer(options *ServerOptions) Server\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"ServerOptions"}),"\u7ed3\u6784\u4f53\u7528\u4e8e\u914d\u7f6e\u670d\u52a1\u5668\u884c\u4e3a\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'type ServerOptions struct {\r\n    Address        string   // \u670d\u52a1\u76d1\u542c\u5730\u5740\uff0c\u9ed8\u8ba4":8000"\r\n    SerializeType  uint8    // \u5e8f\u5217\u5316\u7c7b\u578b\uff0c\u9ed8\u8ba4JSON\r\n    EnableRegistry bool     // \u662f\u5426\u542f\u7528\u670d\u52a1\u6ce8\u518c\r\n    Registry       Registry // \u6ce8\u518c\u4e2d\u5fc3\u5b9e\u4f8b\r\n    RegistryAddrs  []string // \u6ce8\u518c\u4e2d\u5fc3\u5730\u5740\r\n    ServiceName    string   // \u670d\u52a1\u540d\u79f0\r\n    ServiceVersion string   // \u670d\u52a1\u7248\u672c\r\n    Weight         int      // \u670d\u52a1\u6743\u91cd\r\n    Metadata       map[string]string // \u670d\u52a1\u5143\u6570\u636e\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"client",children:"Client"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Client"}),"\u63a5\u53e3\u5b9a\u4e49\u4e86 RPC \u5ba2\u6237\u7aef\u7684\u6838\u5fc3\u529f\u80fd\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"type Client interface {\r\n    // Call \u540c\u6b65\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\r\n    Call(ctx context.Context, service, method string, req interface{}, resp interface{}) error\r\n\r\n    // Close \u5173\u95ed\u5ba2\u6237\u7aef\u8fde\u63a5\r\n    Close() error\r\n}\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u4f7f\u7528",(0,s.jsx)(r.code,{children:"NewClient"}),"\u51fd\u6570\u521b\u5efa\u5ba2\u6237\u7aef\u5b9e\u4f8b\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"func NewClient(options *ClientOptions) (Client, error)\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"ClientOptions"}),"\u7ed3\u6784\u4f53\u7528\u4e8e\u914d\u7f6e\u5ba2\u6237\u7aef\u884c\u4e3a\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"type ClientOptions struct {\r\n    Address       string        // \u670d\u52a1\u5668\u5730\u5740\r\n    Timeout       time.Duration // \u8bf7\u6c42\u8d85\u65f6\r\n    PoolSize      int           // \u8fde\u63a5\u6c60\u5927\u5c0f\r\n    SerializeType uint8         // \u5e8f\u5217\u5316\u7c7b\u578b\r\n    Discovery     Discovery     // \u670d\u52a1\u53d1\u73b0\u5b9e\u4f8b\r\n    ServiceName   string        // \u670d\u52a1\u540d\u79f0\r\n    ServiceVersion string       // \u670d\u52a1\u7248\u672c\r\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"service",children:"Service"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Service"}),"\u63a5\u53e3\u5141\u8bb8\u5f00\u53d1\u8005\u5b9a\u4e49\u670d\u52a1\u4fe1\u606f\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"type Service interface {\r\n    // ServiceInfo \u8fd4\u56de\u670d\u52a1\u4fe1\u606f\r\n    ServiceInfo() *ServiceInfo\r\n}\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"ServiceInfo"}),"\u7ed3\u6784\u4f53\u5305\u542b\u670d\u52a1\u7684\u5143\u6570\u636e\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"type ServiceInfo struct {\r\n    Name        string            // \u670d\u52a1\u540d\u79f0\r\n    Version     string            // \u670d\u52a1\u7248\u672c\r\n    Description string            // \u670d\u52a1\u63cf\u8ff0\r\n    Metadata    map[string]string // \u670d\u52a1\u5143\u6570\u636e\r\n}\n"})})]})}function p(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>a});var i=n(6540);const s={},c=i.createContext(s);function t(e){const r=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(c.Provider,{value:r},e.children)}}}]);