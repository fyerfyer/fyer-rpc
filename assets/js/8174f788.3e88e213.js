"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[346],{4020:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"examples/cluster-examples","title":"fyerrpc Cluster Example","description":"\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86 fyerrpc \u6846\u67b6\u7684\u5b8c\u6574\u96c6\u7fa4\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u5177\u6709\u6545\u969c\u8f6c\u79fb\u3001\u670d\u52a1\u53d1\u73b0\u548c\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u7684\u5206\u5e03\u5f0f RPC \u7cfb\u7edf\u3002\u6b64\u793a\u4f8b\u7531\u5ba2\u6237\u7aef\u3001\u670d\u52a1\u5668\u3001\u516c\u5171\u7ec4\u4ef6\u548c\u8f85\u52a9\u811a\u672c\u7ec4\u6210\uff0c\u662f\u4e00\u4e2a\u7aef\u5230\u7aef\u7684\u5fae\u670d\u52a1\u6f14\u793a\u3002","source":"@site/docs/examples/cluster-examples.md","sourceDirName":"examples","slug":"/examples/cluster-examples","permalink":"/fyer-rpc/docs/examples/cluster-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/fyerfyer/fyer-rpc/tree/main/docs/examples/cluster-examples.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"utils Package","permalink":"/fyer-rpc/docs/api-reference/utils-package"},"next":{"title":"Getting Started","permalink":"/fyer-rpc/docs/getting-started/started"}}');var l=n(4848),s=n(8453);const i={},c="fyerrpc Cluster Example",o={},a=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u670d\u52a1\u5b9a\u4e49 (helloworld)",id:"\u670d\u52a1\u5b9a\u4e49-helloworld",level:2},{value:"\u670d\u52a1\u63a5\u53e3",id:"\u670d\u52a1\u63a5\u53e3",level:3},{value:"\u670d\u52a1\u5b9e\u73b0",id:"\u670d\u52a1\u5b9e\u73b0",level:3},{value:"\u516c\u5171\u7ec4\u4ef6 (common)",id:"\u516c\u5171\u7ec4\u4ef6-common",level:2},{value:"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u914d\u7f6e",id:"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u914d\u7f6e",level:3},{value:"\u7b80\u5355\u6307\u6807\u6536\u96c6\u5668",id:"\u7b80\u5355\u6307\u6807\u6536\u96c6\u5668",level:3},{value:"\u670d\u52a1\u5668\u7aef (server)",id:"\u670d\u52a1\u5668\u7aef-server",level:2},{value:"\u4e3b\u7a0b\u5e8f (main.go)",id:"\u4e3b\u7a0b\u5e8f-maingo",level:3},{value:"\u5065\u5eb7\u68c0\u6d4b\u5668 (detector.go)",id:"\u5065\u5eb7\u68c0\u6d4b\u5668-detectorgo",level:3},{value:"\u670d\u52a1\u5b9e\u73b0 (service.go)",id:"\u670d\u52a1\u5b9e\u73b0-servicego",level:3},{value:"\u5ba2\u6237\u7aef (client)",id:"\u5ba2\u6237\u7aef-client",level:2},{value:"\u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668 (failover.go)",id:"\u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668-failovergo",level:3},{value:"\u5ba2\u6237\u7aef\u5b9e\u73b0 (client.go)",id:"\u5ba2\u6237\u7aef\u5b9e\u73b0-clientgo",level:3},{value:"\u4e3b\u7a0b\u5e8f (main.go)",id:"\u4e3b\u7a0b\u5e8f-maingo-1",level:3},{value:"\u542f\u52a8\u811a\u672c (scripts)",id:"\u542f\u52a8\u811a\u672c-scripts",level:2},{value:"start_cluster.sh (Linux/macOS)",id:"start_clustersh-linuxmacos",level:3},{value:"start_cluster.bat (Windows)",id:"start_clusterbat-windows",level:3},{value:"\u529f\u80fd\u6f14\u793a",id:"\u529f\u80fd\u6f14\u793a",level:2},{value:"1. \u57fa\u672c RPC \u8c03\u7528",id:"1-\u57fa\u672c-rpc-\u8c03\u7528",level:3},{value:"2. \u6545\u969c\u8f6c\u79fb",id:"2-\u6545\u969c\u8f6c\u79fb",level:3},{value:"3. \u7194\u65ad\u5668",id:"3-\u7194\u65ad\u5668",level:3},{value:"4. \u5e76\u53d1\u8c03\u7528",id:"4-\u5e76\u53d1\u8c03\u7528",level:3},{value:"5. \u6307\u6807\u6536\u96c6",id:"5-\u6307\u6807\u6536\u96c6",level:3},{value:"\u8fd0\u884c\u793a\u4f8b",id:"\u8fd0\u884c\u793a\u4f8b",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.header,{children:(0,l.jsx)(r.h1,{id:"fyerrpc-cluster-example",children:"fyerrpc Cluster Example"})}),"\n",(0,l.jsx)(r.p,{children:"\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86 fyerrpc \u6846\u67b6\u7684\u5b8c\u6574\u96c6\u7fa4\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u5177\u6709\u6545\u969c\u8f6c\u79fb\u3001\u670d\u52a1\u53d1\u73b0\u548c\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u7684\u5206\u5e03\u5f0f RPC \u7cfb\u7edf\u3002\u6b64\u793a\u4f8b\u7531\u5ba2\u6237\u7aef\u3001\u670d\u52a1\u5668\u3001\u516c\u5171\u7ec4\u4ef6\u548c\u8f85\u52a9\u811a\u672c\u7ec4\u6210\uff0c\u662f\u4e00\u4e2a\u7aef\u5230\u7aef\u7684\u5fae\u670d\u52a1\u6f14\u793a\u3002"}),"\n",(0,l.jsx)(r.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,l.jsx)(r.p,{children:"\u8be5\u793a\u4f8b\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u95ee\u5019\u670d\u52a1\uff08GreetService\uff09\uff0c\u5305\u542b\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"\u670d\u52a1\u5b9a\u4e49\uff08helloworld\uff09"}),"\uff1a\u4f7f\u7528 Protocol Buffers \u5b9a\u4e49\u7684\u670d\u52a1\u63a5\u53e3"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"\u670d\u52a1\u5668\u7aef\uff08server\uff09"}),"\uff1a\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\uff0c\u652f\u6301\u6545\u969c\u6a21\u62df"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"\u5ba2\u6237\u7aef\uff08client\uff09"}),"\uff1a\u652f\u6301\u6545\u969c\u8f6c\u79fb\u548c\u8d1f\u8f7d\u5747\u8861\u7684 RPC \u5ba2\u6237\u7aef"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"\u5171\u4eab\u7ec4\u4ef6\uff08common\uff09"}),"\uff1a\u5404\u7ec4\u4ef6\u95f4\u5171\u4eab\u7684\u914d\u7f6e\u548c\u5de5\u5177"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"\u542f\u52a8\u811a\u672c\uff08scripts\uff09"}),"\uff1a\u7528\u4e8e\u542f\u52a8\u548c\u505c\u6b62\u670d\u52a1\u96c6\u7fa4"]}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:"\u793a\u4f8b\u5c55\u793a\u4e86\u4ee5\u4e0b\u5173\u952e\u529f\u80fd\uff1a"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"\u670d\u52a1\u53d1\u73b0\u548c\u6ce8\u518c"}),"\n",(0,l.jsx)(r.li,{children:"\u5ba2\u6237\u7aef\u8d1f\u8f7d\u5747\u8861"}),"\n",(0,l.jsx)(r.li,{children:"\u6545\u969c\u8f6c\u79fb\u548c\u91cd\u8bd5\u673a\u5236"}),"\n",(0,l.jsx)(r.li,{children:"\u670d\u52a1\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,l.jsx)(r.li,{children:"\u7194\u65ad\u5668\u548c\u6545\u969c\u9694\u79bb"}),"\n",(0,l.jsx)(r.li,{children:"\u6307\u6807\u6536\u96c6\u548c\u76d1\u63a7"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"\u670d\u52a1\u5b9a\u4e49-helloworld",children:"\u670d\u52a1\u5b9a\u4e49 (helloworld)"}),"\n",(0,l.jsx)(r.h3,{id:"\u670d\u52a1\u63a5\u53e3",children:"\u670d\u52a1\u63a5\u53e3"}),"\n",(0,l.jsx)(r.p,{children:"\u670d\u52a1\u63a5\u53e3\u4f7f\u7528 Protocol Buffers \u5b9a\u4e49\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-protobuf",children:'// hello.proto\r\nsyntax = "proto3";\r\n\r\noption go_package = ".;helloworld";\r\n\r\n// GreetService \u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u7684\u95ee\u5019\u670d\u52a1\r\nservice GreetService {\r\n  // SayHello \u53d1\u9001\u95ee\u5019\r\n  rpc SayHello(HelloRequest) returns (HelloResponse) {}\r\n  // GetGreetStats \u83b7\u53d6\u95ee\u5019\u7edf\u8ba1\u4fe1\u606f\r\n  rpc GetGreetStats(StatsRequest) returns (StatsResponse) {}\r\n}\r\n\r\n// HelloRequest \u95ee\u5019\u8bf7\u6c42\r\nmessage HelloRequest {\r\n  string name = 1;           // \u88ab\u95ee\u5019\u8005\u59d3\u540d\r\n  string greeting = 2;       // \u81ea\u5b9a\u4e49\u95ee\u5019\u8bed(\u53ef\u9009)\r\n}\r\n\r\n// HelloResponse \u95ee\u5019\u54cd\u5e94\r\nmessage HelloResponse {\r\n  string message = 1;        // \u95ee\u5019\u6d88\u606f\r\n  int64 greet_time = 2;      // \u95ee\u5019\u65f6\u95f4\u6233\r\n}\r\n\r\n// StatsRequest \u7edf\u8ba1\u8bf7\u6c42\r\nmessage StatsRequest {\r\n  string name = 1;          // \u67e5\u8be2\u6307\u5b9a\u7528\u6237\u7684\u7edf\u8ba1(\u53ef\u9009)\r\n}\r\n\r\n// StatsResponse \u7edf\u8ba1\u54cd\u5e94\r\nmessage StatsResponse {\r\n  int64 total_greets = 1;   // \u603b\u95ee\u5019\u6b21\u6570\r\n  map<string, int64> greets_by_name = 2;  // \u5404\u7528\u6237\u7684\u95ee\u5019\u6b21\u6570\r\n  int64 last_greet_time = 3;    // \u6700\u540e\u4e00\u6b21\u95ee\u5019\u65f6\u95f4\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"\u670d\u52a1\u5b9e\u73b0",children:"\u670d\u52a1\u5b9e\u73b0"}),"\n",(0,l.jsx)(r.p,{children:"\u670d\u52a1\u7684\u57fa\u672c\u5b9e\u73b0\u903b\u8f91\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// hello.go\r\npackage helloworld\r\n\r\nimport (\r\n\t"context"\r\n\t"sync"\r\n\t"time"\r\n)\r\n\r\n// GreetServiceImpl \u95ee\u5019\u670d\u52a1\u5b9e\u73b0\r\ntype GreetServiceImpl struct {\r\n\tmu sync.RWMutex\r\n\t// \u7edf\u8ba1\u4fe1\u606f\r\n\ttotalGreets   int64\r\n\tgreetsByName  map[string]int64\r\n\tlastGreetTime int64\r\n}\r\n\r\n// SayHello \u5b9e\u73b0\u95ee\u5019\u65b9\u6cd5\r\nfunc (s *GreetServiceImpl) SayHello(ctx context.Context, req *HelloRequest) (*HelloResponse, error) {\r\n\t// \u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\u5e76\u8fd4\u56de\u95ee\u5019\u6d88\u606f\r\n\t// ...\r\n}\r\n\r\n// GetGreetStats \u5b9e\u73b0\u7edf\u8ba1\u65b9\u6cd5\r\nfunc (s *GreetServiceImpl) GetGreetStats(ctx context.Context, req *StatsRequest) (*StatsResponse, error) {\r\n\t// \u8fd4\u56de\u7edf\u8ba1\u4fe1\u606f\r\n\t// ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h2,{id:"\u516c\u5171\u7ec4\u4ef6-common",children:"\u516c\u5171\u7ec4\u4ef6 (common)"}),"\n",(0,l.jsx)(r.h3,{id:"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u914d\u7f6e",children:"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u914d\u7f6e"}),"\n",(0,l.jsx)(r.p,{children:"config.go \u5b9a\u4e49\u4e86\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u914d\u7f6e\u7ed3\u6784\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:"// ServerConfig \u670d\u52a1\u5668\u914d\u7f6e\r\ntype ServerConfig struct {\r\n\t// \u57fa\u672c\u914d\u7f6e\r\n\tID      string // \u670d\u52a1\u5668ID\r\n\tAddress string // \u670d\u52a1\u5730\u5740\r\n\tPort    int    // \u670d\u52a1\u7aef\u53e3\r\n\r\n\t// \u6545\u969c\u6a21\u62df\u76f8\u5173\r\n\tFailAfter    int           // \u5728\u5904\u7406\u8fd9\u4e48\u591a\u4e2a\u8bf7\u6c42\u540e\u6545\u969c\r\n\tFailDuration time.Duration // \u6545\u969c\u6301\u7eed\u65f6\u95f4\r\n\tFailRate     float64       // \u968f\u673a\u6545\u969c\u6982\u7387 (0-1)\r\n}\r\n\r\n// ClientConfig \u5ba2\u6237\u7aef\u914d\u7f6e\r\ntype ClientConfig struct {\r\n\t// \u57fa\u672c\u914d\u7f6e\r\n\tServerAddresses []string      // \u670d\u52a1\u5668\u5730\u5740\u5217\u8868\r\n\tTimeout         time.Duration // \u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\r\n\r\n\t// \u6545\u969c\u8f6c\u79fb\u914d\u7f6e\r\n\tFailoverConfig *failover.Config // \u6545\u969c\u8f6c\u79fb\u914d\u7f6e\r\n\tEnableFailover bool             // \u662f\u5426\u542f\u7528\u6545\u969c\u8f6c\u79fb\r\n}\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u7b80\u5355\u6307\u6807\u6536\u96c6\u5668",children:"\u7b80\u5355\u6307\u6807\u6536\u96c6\u5668"}),"\n",(0,l.jsx)(r.p,{children:"metrics.go \u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u5b58\u6307\u6807\u6536\u96c6\u5668\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:"// SimpleMetrics \u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6307\u6807\u6536\u96c6\u5b9e\u73b0\uff0c\u7528\u4e8e\u793a\u4f8b\r\ntype SimpleMetrics struct {\r\n\t// \u8ba1\u6570\u5668\r\n\trequestCount  int64 // \u8bf7\u6c42\u603b\u6570\r\n\tsuccessCount  int64 // \u6210\u529f\u8bf7\u6c42\u6570\r\n\tfailureCount  int64 // \u5931\u8d25\u8bf7\u6c42\u6570\r\n\tretryCount    int64 // \u91cd\u8bd5\u6b21\u6570\r\n\tfailoverCount int64 // \u6545\u969c\u8f6c\u79fb\u6b21\u6570\r\n\tcircuitBreaks int64 // \u7194\u65ad\u6b21\u6570\r\n\r\n\t// \u5b9e\u4f8b\u7ea7\u522b\u7edf\u8ba1\r\n\tinstanceStats map[string]*InstanceStat\r\n\r\n\t// \u54cd\u5e94\u65f6\u95f4\u548c\u4e8b\u4ef6\u8bb0\u5f55\r\n\t// ...\r\n}\r\n\r\n// \u5404\u79cd\u8bb0\u5f55\u548c\u83b7\u53d6\u6307\u6807\u7684\u65b9\u6cd5\r\n// ...\n"})}),"\n",(0,l.jsx)(r.h2,{id:"\u670d\u52a1\u5668\u7aef-server",children:"\u670d\u52a1\u5668\u7aef (server)"}),"\n",(0,l.jsx)(r.p,{children:"\u670d\u52a1\u5668\u7aef\u5b9e\u73b0\u4e86\u652f\u6301\u6545\u969c\u6a21\u62df\u7684 RPC \u670d\u52a1\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"}),"\n",(0,l.jsx)(r.h3,{id:"\u4e3b\u7a0b\u5e8f-maingo",children:"\u4e3b\u7a0b\u5e8f (main.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u4e3b\u7a0b\u5e8f\u8d1f\u8d23\u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570\u3001\u521b\u5efa\u670d\u52a1\u5668\u5b9e\u4f8b\u3001\u6ce8\u518c\u670d\u52a1\u5e76\u542f\u52a8\u76d1\u542c\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'func main() {\r\n\t// \u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570\r\n\tflag.Parse()\r\n\r\n\t// \u521b\u5efa etcd \u6ce8\u518c\u4e2d\u5fc3\r\n\tregistry, err := etcd.New(/* ... */)\r\n\t\r\n\t// \u6839\u636e\u547d\u4ee4\u884c\u53c2\u6570\u521b\u5efa\u670d\u52a1\u5668\u914d\u7f6e\r\n\tserverConfig := &common.ServerConfig{\r\n\t\tID:           *id,\r\n\t\tAddress:      "localhost",\r\n\t\tPort:         *port,\r\n\t\tFailAfter:    *failAfter,\r\n\t\tFailDuration: *failDuration,\r\n\t\tFailRate:     *failRate,\r\n\t}\r\n\r\n\t// \u521b\u5efa Prometheus \u6307\u6807\u670d\u52a1\r\n\t// ...\r\n\r\n\t// \u521b\u5efa RPC \u670d\u52a1\u5668\r\n\tserver := rpc.NewServer()\r\n\r\n\t// \u521b\u5efa\u5e76\u542f\u52a8 Greet \u670d\u52a1\r\n\tgreetServer := NewGreetServer(registry, serverConfig)\r\n\t\r\n\t// \u542f\u52a8\u670d\u52a1\u6ce8\u518c\u548c\u5065\u5eb7\u68c0\u67e5\r\n\t// ...\r\n\r\n\t// \u7b49\u5f85\u7ec8\u6b62\u4fe1\u53f7\u5e76\u4f18\u96c5\u5173\u95ed\r\n\t// ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"\u5065\u5eb7\u68c0\u6d4b\u5668-detectorgo",children:"\u5065\u5eb7\u68c0\u6d4b\u5668 (detector.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u5065\u5eb7\u68c0\u6d4b\u5668\u8d1f\u8d23\u6a21\u62df\u670d\u52a1\u6545\u969c\u5e76\u63d0\u4f9b\u5065\u5eb7\u68c0\u67e5\u63a5\u53e3\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:"// HealthDetector \u5065\u5eb7\u68c0\u6d4b\u5668\uff0c\u7ba1\u7406\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u5e76\u6a21\u62df\u6545\u969c\u60c5\u51b5\r\ntype HealthDetector struct {\r\n\tconfig        *common.ServerConfig\r\n\trequestCount  int64  // \u8bf7\u6c42\u8ba1\u6570\u5668\r\n\tfailureTime   *int64 // \u6545\u969c\u5f00\u59cb\u65f6\u95f4\uff08\u5982\u679c\u5f53\u524d\u5904\u4e8e\u6545\u969c\u72b6\u6001\uff09\r\n\tstatusHandler http.Handler\r\n\tmetrics       *common.SimpleMetrics\r\n\tmu            sync.RWMutex\r\n}\r\n\r\n// IsHealthy \u68c0\u67e5\u670d\u52a1\u662f\u5426\u5065\u5eb7\r\nfunc (d *HealthDetector) IsHealthy() bool {\r\n\t// \u6839\u636e\u914d\u7f6e\u6a21\u62df\u6545\u969c\r\n\t// 1. \u68c0\u67e5\u968f\u673a\u6545\u969c\u7387\r\n\t// 2. \u68c0\u67e5\u8bf7\u6c42\u6570\u662f\u5426\u8fbe\u5230\u6545\u969c\u9608\u503c\r\n\t// 3. \u68c0\u67e5\u6545\u969c\u6301\u7eed\u65f6\u95f4\u662f\u5426\u5df2\u8fc7\r\n\t// ...\r\n}\r\n\r\n// \u63d0\u4f9b\u5065\u5eb7\u68c0\u67e5\u548c\u6307\u6807 HTTP \u63a5\u53e3\r\n// ...\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u670d\u52a1\u5b9e\u73b0-servicego",children:"\u670d\u52a1\u5b9e\u73b0 (service.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u5c01\u88c5\u4e86 GreetService \u7684\u670d\u52a1\u5b9e\u73b0\uff0c\u6dfb\u52a0\u4e86\u6545\u969c\u6a21\u62df\u548c\u76d1\u63a7\u529f\u80fd\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// GreetServer \u662f GreetService \u7684\u670d\u52a1\u7aef\u5b9e\u73b0\r\ntype GreetServer struct {\r\n\tgreetService *helloworld.GreetServiceImpl // \u539f\u59cb\u670d\u52a1\u5b9e\u73b0\r\n\tregistry     registry.Registry\r\n\tinstance     *naming.Instance\r\n\tconfig       *common.ServerConfig\r\n\tdetector     *HealthDetector\r\n\tmetrics      *common.SimpleMetrics\r\n\trequestCount int64 // \u8bf7\u6c42\u8ba1\u6570\r\n}\r\n\r\n// SayHello \u5305\u88c5\u539f\u59cb\u7684 SayHello \u65b9\u6cd5\uff0c\u6dfb\u52a0\u6545\u969c\u6a21\u62df\u903b\u8f91\r\nfunc (s *GreetServer) SayHello(ctx context.Context, req *helloworld.HelloRequest) (*helloworld.HelloResponse, error) {\r\n\t// \u589e\u52a0\u8bf7\u6c42\u8ba1\u6570\r\n\treqCount := atomic.AddInt64(&s.requestCount, 1)\r\n\r\n\t// \u68c0\u67e5\u662f\u5426\u5e94\u8be5\u6a21\u62df\u6545\u969c\r\n\tisHealthy := s.detector.IsHealthy()\r\n\tif !isHealthy {\r\n\t\treturn nil, fmt.Errorf("service %s is currently unavailable", s.config.ID)\r\n\t}\r\n\r\n\t// \u8bb0\u5f55\u8bf7\u6c42\u5f00\u59cb\u65f6\u95f4\u548c\u6307\u6807\r\n\t// \u8c03\u7528\u539f\u59cb\u670d\u52a1\u5b9e\u73b0\r\n\t// ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h2,{id:"\u5ba2\u6237\u7aef-client",children:"\u5ba2\u6237\u7aef (client)"}),"\n",(0,l.jsx)(r.p,{children:"\u5ba2\u6237\u7aef\u5b9e\u73b0\u4e86\u652f\u6301\u6545\u969c\u8f6c\u79fb\u7684 RPC \u8c03\u7528\u529f\u80fd\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"}),"\n",(0,l.jsx)(r.h3,{id:"\u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668-failovergo",children:"\u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668 (failover.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668\u8d1f\u8d23\u5904\u7406\u670d\u52a1\u5b9e\u4f8b\u6545\u969c\u5e76\u81ea\u52a8\u5207\u6362\u5230\u5065\u5eb7\u5b9e\u4f8b\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:"// FailoverManager \u7ba1\u7406\u5ba2\u6237\u7aef\u7684\u6545\u969c\u8f6c\u79fb\u529f\u80fd\r\ntype FailoverManager struct {\r\n\thandler        *failover.DefaultFailoverHandler // \u6545\u969c\u8f6c\u79fb\u5904\u7406\u5668\r\n\tconfig         *failover.Config                 // \u6545\u969c\u8f6c\u79fb\u914d\u7f6e\r\n\tmetrics        *common.SimpleMetrics            // \u6307\u6807\u6536\u96c6\u5668\r\n\tserverList     []*naming.Instance               // \u670d\u52a1\u5668\u5b9e\u4f8b\u5217\u8868\r\n\tactiveInstance *naming.Instance                 // \u5f53\u524d\u6d3b\u8dc3\u7684\u5b9e\u4f8b\r\n\tmu             sync.RWMutex\r\n}\r\n\r\n// ExecuteRPC \u6267\u884c\u5e26\u6545\u969c\u8f6c\u79fb\u7684RPC\u8c03\u7528\r\nfunc (fm *FailoverManager) ExecuteRPC(ctx context.Context, serviceName, methodName string, req interface{}, resp interface{}) error {\r\n\t// \u590d\u5236\u5b9e\u4f8b\u5217\u8868\r\n\t// \u5b9a\u4e49RPC\u8c03\u7528\u64cd\u4f5c\r\n\t// \u6267\u884c\u5e26\u6545\u969c\u8f6c\u79fb\u7684\u8c03\u7528\r\n\t// \u8bb0\u5f55\u6545\u969c\u548c\u6062\u590d\u4e8b\u4ef6\r\n\t// ...\r\n}\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u5ba2\u6237\u7aef\u5b9e\u73b0-clientgo",children:"\u5ba2\u6237\u7aef\u5b9e\u73b0 (client.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u5c01\u88c5\u4e86 GreetService \u7684\u5ba2\u6237\u7aef\u8c03\u7528\u903b\u8f91\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:"// GreetClient \u5305\u88c5\u4e86\u95ee\u5019\u670d\u52a1\u5ba2\u6237\u7aef\u7684\u5b9e\u73b0\r\ntype GreetClient struct {\r\n\tbalancer        *discovery.LoadBalancer\r\n\tmetrics         metrics.Metrics\r\n\tdiscovery       discovery.Discovery\r\n\tfailoverManager *FailoverManager     // \u6545\u969c\u8f6c\u79fb\u7ba1\u7406\u5668\r\n\tconfig          *common.ClientConfig // \u5ba2\u6237\u7aef\u914d\u7f6e\r\n}\r\n\r\n// SayHello \u8c03\u7528\u95ee\u5019\u670d\u52a1\r\nfunc (c *GreetClient) SayHello(ctx context.Context, name string, greeting string) (*helloworld.HelloResponse, error) {\r\n\t// \u6784\u9020\u8bf7\u6c42\r\n\t// \u9009\u62e9\u8c03\u7528\u65b9\u5f0f\uff08\u6545\u969c\u8f6c\u79fb\u6216\u8d1f\u8f7d\u5747\u8861\uff09\r\n\t// \u8bb0\u5f55\u8c03\u7528\u7ed3\u679c\r\n\t// ...\r\n}\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u4e3b\u7a0b\u5e8f-maingo-1",children:"\u4e3b\u7a0b\u5e8f (main.go)"}),"\n",(0,l.jsx)(r.p,{children:"\u4e3b\u7a0b\u5e8f\u6f14\u793a\u4e86\u5404\u79cd\u6545\u969c\u8f6c\u79fb\u573a\u666f\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'func main() {\r\n\t// \u521b\u5efa\u5e26\u6545\u969c\u8f6c\u79fb\u529f\u80fd\u7684\u914d\u7f6e\r\n\tserverAddresses := []string{\r\n\t\t"localhost:8001",\r\n\t\t"localhost:8002",\r\n\t\t"localhost:8003",\r\n\t}\r\n\tclientConfig := CreateDefaultClientConfig(serverAddresses)\r\n\r\n\t// \u521b\u5efa\u5e26\u6545\u969c\u8f6c\u79fb\u529f\u80fd\u7684\u5ba2\u6237\u7aef\r\n\tclient, err := NewGreetClient("GreetService", clientConfig)\r\n\t\r\n\t// \u542f\u52a8\u5065\u5eb7\u76d1\u6d4b\u5668\r\n\t// ...\r\n\r\n\t// \u6d4b\u8bd5\u4e00\u822c\u8c03\u7528\r\n\ttestBasicCalls(ctx, client)\r\n\r\n\t// \u6d4b\u8bd5\u6545\u969c\u8f6c\u79fb\r\n\ttestFailover(ctx, client)\r\n\r\n\t// \u6d4b\u8bd5\u7194\u65ad\u5668\r\n\ttestCircuitBreaker(ctx, client)\r\n\r\n\t// \u6d4b\u8bd5\u5e76\u53d1\u8c03\u7528\r\n\ttestConcurrentCalls(ctx, client)\r\n\r\n\t// \u663e\u793a\u6700\u7ec8\u6307\u6807\r\n\tshowFailoverMetrics(client)\r\n}\n'})}),"\n",(0,l.jsx)(r.h2,{id:"\u542f\u52a8\u811a\u672c-scripts",children:"\u542f\u52a8\u811a\u672c (scripts)"}),"\n",(0,l.jsx)(r.p,{children:"\u63d0\u4f9b\u4e86\u542f\u52a8\u548c\u505c\u6b62\u670d\u52a1\u96c6\u7fa4\u7684\u811a\u672c\uff1a"}),"\n",(0,l.jsx)(r.h3,{id:"start_clustersh-linuxmacos",children:"start_cluster.sh (Linux/macOS)"}),"\n",(0,l.jsx)(r.p,{children:"Linux/macOS \u73af\u5883\u4e0b\u542f\u52a8\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\u7684\u811a\u672c\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:'#!/bin/bash\r\n# \u542f\u52a8\u591a\u4e2a\u670d\u52a1\u5668\u5b9e\u4f8b\uff0c\u7528\u4e8e\u6f14\u793a\u6545\u969c\u8f6c\u79fb\u529f\u80fd\r\n\r\necho "Starting server cluster for failover demonstration..."\r\n\r\n# \u8bbe\u7f6e\u57fa\u7840\u7aef\u53e3\u53f7\r\nBASE_PORT=8001\r\nSERVERS_COUNT=3\r\n\r\n# Server A - \u5904\u7406100\u4e2a\u8bf7\u6c42\u540e\u6545\u969c\r\necho "Starting Server A (Port $BASE_PORT) - Fails after 100 requests for 10s"\r\ncd ../server && go run . -port=$BASE_PORT -id=server-A -fail-after=100 -fail-duration=10s > ../scripts/logs/server_a.log 2>&1 &\r\n\r\n# Server B - 10%\u6982\u7387\u968f\u673a\u6545\u969c\r\nPORT_B=$((BASE_PORT+1))\r\necho "Starting Server B (Port $PORT_B) - 10% random failure rate"\r\ncd ../server && go run . -port=$PORT_B -id=server-B -fail-rate=0.1 > ../scripts/logs/server_b.log 2>&1 &\r\n\r\n# Server C - \u6b63\u5e38\u8fd0\u884c\r\nPORT_C=$((BASE_PORT+2))\r\necho "Starting Server C (Port $PORT_C) - Normal operation"\r\ncd ../server && go run . -port=$PORT_C -id=server-C > ../scripts/logs/server_c.log 2>&1 &\r\n\r\n# \u542f\u52a8\u5ba2\u6237\u7aef\u793a\u4f8b\r\necho "Starting failover client demo..."\r\ncd ../client && go run . > ../scripts/logs/client.log 2>&1 &\n'})}),"\n",(0,l.jsx)(r.h3,{id:"start_clusterbat-windows",children:"start_cluster.bat (Windows)"}),"\n",(0,l.jsx)(r.p,{children:"Windows \u73af\u5883\u4e0b\u542f\u52a8\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\u7684\u811a\u672c\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-batch",children:'@echo off\r\nREM \u542f\u52a8\u591a\u4e2a\u670d\u52a1\u5668\u5b9e\u4f8b\uff0c\u7528\u4e8e\u6f14\u793a\u6545\u969c\u8f6c\u79fb\u529f\u80fd\r\necho Starting server cluster for failover demonstration...\r\n\r\nREM \u8bbe\u7f6e\u57fa\u7840\u7aef\u53e3\u53f7\r\nset BASE_PORT=8001\r\nset SERVERS_COUNT=3\r\n\r\nREM Server A - \u5904\u7406100\u4e2a\u8bf7\u6c42\u540e\u6545\u969c\r\nstart "Server A (Port %BASE_PORT%)" cmd /c "cd ..\\server && go run . -port=%BASE_PORT% -id=server-A -fail-after=100 -fail-duration=10s"\r\n\r\nREM Server B - 10%\u6982\u7387\u968f\u673a\u6545\u969c\r\nset /a "PORT_B=%BASE_PORT%+1"\r\nstart "Server B (Port %PORT_B%)" cmd /c "cd ..\\server && go run . -port=%PORT_B% -id=server-B -fail-rate=0.1"\r\n\r\nREM Server C - \u6b63\u5e38\u8fd0\u884c\r\nset /a "PORT_C=%BASE_PORT%+2"\r\nstart "Server C (Port %PORT_C%)" cmd /c "cd ..\\server && go run . -port=%PORT_C% -id=server-C"\r\n\r\nREM \u542f\u52a8\u5ba2\u6237\u7aef\u793a\u4f8b\r\nstart "Failover Client Demo" cmd /c "cd ..\\client && go run ."\n'})}),"\n",(0,l.jsx)(r.h2,{id:"\u529f\u80fd\u6f14\u793a",children:"\u529f\u80fd\u6f14\u793a"}),"\n",(0,l.jsx)(r.p,{children:"\u6574\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u4ee5\u4e0b\u6838\u5fc3\u529f\u80fd\uff1a"}),"\n",(0,l.jsx)(r.h3,{id:"1-\u57fa\u672c-rpc-\u8c03\u7528",children:"1. \u57fa\u672c RPC \u8c03\u7528"}),"\n",(0,l.jsx)(r.p,{children:"\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u57fa\u672c\u7684 RPC \u8bf7\u6c42\uff0c\u5c55\u793a\u6b63\u5e38\u8c03\u7528\u6d41\u7a0b\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// \u6d4b\u8bd5\u57fa\u672c\u8c03\u7528\r\nfunc testBasicCalls(ctx context.Context, client *GreetClient) {\r\n    for i := 0; i < 3; i++ {\r\n        resp, err := client.SayHello(ctx, fmt.Sprintf("User%d", i), "Hello")\r\n        if err != nil {\r\n            log.Printf("Error: %v", err)\r\n        } else {\r\n            log.Printf("Response: %s", resp.Message)\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"2-\u6545\u969c\u8f6c\u79fb",children:"2. \u6545\u969c\u8f6c\u79fb"}),"\n",(0,l.jsx)(r.p,{children:"\u901a\u8fc7\u5feb\u901f\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\u89e6\u53d1 Server A \u7684\u6545\u969c\u6a21\u62df\uff0c\u7136\u540e\u89c2\u5bdf\u7cfb\u7edf\u5982\u4f55\u81ea\u52a8\u5207\u6362\u5230\u5176\u4ed6\u53ef\u7528\u670d\u52a1\u5668\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// \u6d4b\u8bd5\u6545\u969c\u8f6c\u79fb\r\nfunc testFailover(ctx context.Context, client *GreetClient) {\r\n    // \u5feb\u901f\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\uff0c\u89e6\u53d1\u670d\u52a1\u5668\u6545\u969c\r\n    for i := 0; i < 120; i++ {\r\n        resp, err := client.SayHello(ctx, fmt.Sprintf("User%d", i), "Hello")\r\n        // ...\r\n    }\r\n\r\n    // \u7b49\u5f85\u4e00\u4e0b\uff0c\u8ba9\u670d\u52a1\u5668\u6062\u590d\r\n    fmt.Println("\\n* Waiting for Server A to recover...")\r\n    time.Sleep(12 * time.Second)\r\n\r\n    // \u9a8c\u8bc1\u6062\u590d\u540e\u662f\u5426\u6b63\u5e38\r\n    // ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"3-\u7194\u65ad\u5668",children:"3. \u7194\u65ad\u5668"}),"\n",(0,l.jsx)(r.p,{children:"\u6f14\u793a\u7194\u65ad\u5668\u529f\u80fd\uff0c\u5f53\u670d\u52a1\u5668\u6301\u7eed\u5931\u8d25\u65f6\uff0c\u7194\u65ad\u5668\u5f00\u542f\u4ee5\u907f\u514d\u6301\u7eed\u8c03\u7528\u4e0d\u53ef\u7528\u670d\u52a1\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// \u6d4b\u8bd5\u7194\u65ad\u5668\r\nfunc testCircuitBreaker(ctx context.Context, client *GreetClient) {\r\n    // \u521b\u5efa\u4e00\u4e2a\u77ed\u8d85\u65f6\u7684\u4e0a\u4e0b\u6587\uff0c\u5f3a\u5236\u4ea7\u751f\u8d85\u65f6\u9519\u8bef\u4ee5\u89e6\u53d1\u7194\u65ad\r\n    timeoutCtx, cancel := context.WithTimeout(ctx, 1*time.Millisecond)\r\n    defer cancel()\r\n\r\n    // \u5c1d\u8bd5\u591a\u6b21\u8bf7\u6c42\uff0c\u89e6\u53d1\u7194\u65ad\r\n    for i := 0; i < 5; i++ {\r\n        _, err := client.SayHello(timeoutCtx, "CircuitBreakerTest", "Hello")\r\n        // ...\r\n    }\r\n\r\n    // \u7b49\u5f85\u7194\u65ad\u6062\u590d\r\n    // ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"4-\u5e76\u53d1\u8c03\u7528",children:"4. \u5e76\u53d1\u8c03\u7528"}),"\n",(0,l.jsx)(r.p,{children:"\u6d4b\u8bd5\u7cfb\u7edf\u5728\u5e76\u53d1\u8bf7\u6c42\u4e0b\u7684\u884c\u4e3a\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// \u6d4b\u8bd5\u5e76\u53d1\u8c03\u7528\r\nfunc testConcurrentCalls(ctx context.Context, client *GreetClient) {\r\n    var wg sync.WaitGroup\r\n    for i := 0; i < 10; i++ {\r\n        wg.Add(1)\r\n        go func(id int) {\r\n            defer wg.Done()\r\n            resp, err := client.SayHello(ctx, fmt.Sprintf("ConcurrentUser%d", id), "Hello")\r\n            // ...\r\n        }(i)\r\n    }\r\n    wg.Wait()\r\n}\n'})}),"\n",(0,l.jsx)(r.h3,{id:"5-\u6307\u6807\u6536\u96c6",children:"5. \u6307\u6807\u6536\u96c6"}),"\n",(0,l.jsx)(r.p,{children:"\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u6536\u96c6\u5404\u79cd\u6027\u80fd\u6307\u6807\u548c\u4e8b\u4ef6\u6570\u636e\uff0c\u6700\u540e\u5c55\u793a\u6c47\u603b\u7ed3\u679c\uff1a"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-go",children:'// \u663e\u793a\u6545\u969c\u8f6c\u79fb\u6307\u6807\r\nfunc showFailoverMetrics(client *GreetClient) {\r\n    metrics := client.GetFailoverMetrics()\r\n    \r\n    total, success, failure := metrics.GetRequestCount()\r\n    retryCount := metrics.GetRetryCount()\r\n    failoverCount := metrics.GetFailoverCount()\r\n    circuitBreaks := metrics.GetCircuitBreaks()\r\n    avgResponseTime := metrics.GetAvgResponseTime()\r\n\r\n    fmt.Println("\\n=== Failover Metrics ===")\r\n    fmt.Printf("Total requests: %d (Success: %d, Failure: %d)\\n", total, success, failure)\r\n    fmt.Printf("Retry count: %d\\n", retryCount)\r\n    fmt.Printf("Failover count: %d\\n", failoverCount)\r\n    // ...\r\n}\n'})}),"\n",(0,l.jsx)(r.h2,{id:"\u8fd0\u884c\u793a\u4f8b",children:"\u8fd0\u884c\u793a\u4f8b"}),"\n",(0,l.jsx)(r.p,{children:"\u8981\u8fd0\u884c\u6b64\u5b8c\u6574\u793a\u4f8b\uff0c\u8bf7\u6309\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsx)(r.li,{children:"\u786e\u4fdd\u5df2\u5b89\u88c5\u5e76\u542f\u52a8 etcd\uff1a"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# \u4f7f\u7528 Docker \u8fd0\u884c etcd\r\ndocker run -d --name etcd \\\r\n  -p 2379:2379 -p 2380:2380 \\\r\n  quay.io/coreos/etcd:v3.4.15 \\\r\n  /usr/local/bin/etcd \\\r\n  --advertise-client-urls http://0.0.0.0:2379 \\\r\n  --listen-client-urls http://0.0.0.0:2379\n"})}),"\n",(0,l.jsxs)(r.ol,{start:"2",children:["\n",(0,l.jsx)(r.li,{children:"\u542f\u52a8\u670d\u52a1\u96c6\u7fa4\uff1a"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Linux/macOS\r\ncd scripts\r\n./start_cluster.sh\r\n\r\n# Windows\r\ncd scripts\r\nstart_cluster.bat\n"})}),"\n",(0,l.jsxs)(r.ol,{start:"3",children:["\n",(0,l.jsx)(r.li,{children:"\u89c2\u5bdf\u7ed3\u679c\uff1a"}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:"\u8fd0\u884c\u540e\uff0c\u5ba2\u6237\u7aef\u4f1a\u81ea\u52a8\u6267\u884c\u4e00\u7cfb\u5217\u6d4b\u8bd5\uff0c\u5305\u62ec\u57fa\u672c\u8c03\u7528\u3001\u6545\u969c\u8f6c\u79fb\u6d4b\u8bd5\u3001\u7194\u65ad\u5668\u6d4b\u8bd5\u548c\u5e76\u53d1\u8c03\u7528\u6d4b\u8bd5\uff0c\u7136\u540e\u663e\u793a\u6536\u96c6\u7684\u6307\u6807\u6570\u636e\u3002"}),"\n",(0,l.jsx)(r.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5404\u4e2a\u670d\u52a1\u5668\u7684\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\u6765\u76d1\u63a7\u670d\u52a1\u72b6\u6001\uff1a"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["Server A: ",(0,l.jsx)(r.a,{href:"http://localhost:18001/health",children:"http://localhost:18001/health"})]}),"\n",(0,l.jsxs)(r.li,{children:["Server B: ",(0,l.jsx)(r.a,{href:"http://localhost:18002/health",children:"http://localhost:18002/health"})]}),"\n",(0,l.jsxs)(r.li,{children:["Server C: ",(0,l.jsx)(r.a,{href:"http://localhost:18003/health",children:"http://localhost:18003/health"})]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>c});var t=n(6540);const l={},s=t.createContext(l);function i(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);